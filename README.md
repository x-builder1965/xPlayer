# xPlayer -動画プレイヤー- (xPlayer-windows)

## 概要
xPlayer はローカルファイルやネット動画（YouTube / Twitch 等）の再生を想定した軽量な Electron ベースの動画プレイヤーです。
主な目的はシンプルな操作での再生とプレイリスト管理、URLからの動画再生の補助機能です。

## 主な機能
- ローカル動画ファイル（mp4, webm, ogg, mov, m4v）の再生
- FFmpegを使用してmp4に動画形式を変換
- **動画のカット編集（トリミング）機能** ✂️
- プレイリストの作成、保存、編集
- URL入力によるネット動画の再生（YouTube / Twitch の ID 抽出対応）
- クリップボードからの自動貼り付け補助（Ctrl+N または URL ボタン）
- ショートカット多数対応（再生、音量、フルスクリーン、ヘルプ等）
- ドラッグ＆ドロップ再生

## 動作環境
- Windows 10 / 11
- Node.js / npm（開発時）
- Electron ランタイム（配布版は不要）

## 使い方（ユーザー向け）
1. アプリを起動します（配布版のインストーラからインストールしている場合はメニューから起動）。
2. ファイルをドラッグ＆ドロップ、またはフォルダ選択 / ファイル選択で読み込みます。
3. ネット動画を再生する場合は、画面の「🌐」ボタンを押すか `Ctrl+N` を押して URL 入力欄を開き、URL を貼り付けて `Enter` で確定します。クリップボードの自動貼り付け機能もあります。

### 動画のカット編集（✂️機能）
1. 動画を再生して、`Ctrl+E` を押すか、コントロールパネルの「✂️」ボタンをクリックして編集モードを起動します。
2. 編集モードでは以下の操作ができます：
   - 📍IN ボタン：現在の再生位置をカット開始地点（インマーク）として設定
   - OUT📍 ボタン：現在の再生位置をカット終了地点（アウトマーク）として設定
   - 編集シークバー：カット位置を細かく調整
   - 🎬 ボタン：カット処理を実行し、カットされた動画ファイルを生成（ファイル名は元ファイル名_cut_HHMMSS-HHMMSS.mp4 となります）
   - 🚫 ボタン：編集をキャンセル

## ショートカット（代表例）
- `Ctrl+N` : ネット動画選択（URL入力を開く）
- `Ctrl+D` : フォルダ選択
- `Ctrl+E` : 動画編集モード（カット機能）✂️
- `Ctrl+M` : ミュート切替
- `Space` / 右クリック : 再生 / 一時停止
ショートカットの詳細は「❔」`Ctrl+H` で確認できます。

## 開発者向け（ビルド / 実行）
- 開発用（ソースから実行）:
  1. リポジトリをクローン
  2. `npm install`
  3. `npm start`
- 配布用ビルドは `electron-builder` 等を利用してパッケージングしてください（本プロジェクトは `preload.js` を用いた IPC を使用しています）。

## コード上の注意点 / 主要ファイル
- `index.html` : UI のテンプレート
- `script.js` : 主要なアプリロジック（イベント、ショートカット、動画再生ロジック）
  - URL入力関連: `urlInput`, `urlInputBtn`, `urlConfirmBtn`, `urlCancelBtn`
  - クリップボード処理: `pasteFromClipboard()`, `handlePaste()`
- `preload.js` : Electron のプリロードスクリプト（安全な IPC 露出）
- `main.js` : サーバー側のロジック（ローカルの選択、FFmpegの変換処理）

## 貢献 / バグ報告
- バグ報告や改善提案は issue を作成してください。Pull Request は歓迎します。
- 変更の際は、互換性や既存のショートカット動作に注意してテストしてください。

## ライセンス & 連絡先
- (ライセンスをここに記載してください。例: MIT License)
- 作者: x-builder
- 連絡先: x-builder@gmail.com

---

変更履歴の詳細は `script.js` の冒頭コメントを参照してください。
