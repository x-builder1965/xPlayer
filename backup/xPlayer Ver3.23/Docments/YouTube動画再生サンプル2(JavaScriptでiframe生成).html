<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube動画再生サンプル2(JavaScriptでiframe生成)</title>
    <style>
        body { background:#000; color:#fff; font-family:Arial; padding:20px; }
        .video-container { position:relative; width:964px; height:511px; margin:0 auto; overflow:hidden; }
        .video-container iframe { width:100%; height:100%; border:none; }
        h2 { text-align:center; color:#fff; }
    </style>
</head>
<body>
    <h2>YouTube動画再生サンプル2(JavaScriptでiframe生成)</h2>
    <div class="video-container" id="player-container"></div>

    <script>
        const videoId = 'dIdjyw9qKWs';
        const videoTitle = '仲間だった "しずかちゃん" が裏切って、ドラえもん達に敵として立ちふさがった時の戦闘BGM（歌あり）【新世紀ドラえもん】';

        const container = document.getElementById('player-container');
        const iframe = document.createElement('iframe');

        // 修正ポイント1: referrerpolicyを削除 or no-referrer-when-downgrade
        iframe.src = `https://www.youtube.com/embed/${videoId}?rel=0`;
        iframe.width = '964';
        iframe.height = '511';
        iframe.title = videoTitle;
        iframe.frameBorder = '0';
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
        iframe.allowFullscreen = true;

        // 修正ポイント2: referrerpolicyを削除（推奨） or 緩和
        // iframe.setAttribute('referrerpolicy', 'no-referrer-when-downgrade');
        // → 削除が最も安全

        container.appendChild(iframe);
    </script>
</body>
</html>